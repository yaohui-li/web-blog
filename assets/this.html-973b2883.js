import{_ as t,p,q as o,Z as s,s as n,R as a}from"./framework-053dfde5.js";const e={},c=s(`<h1 id="ä»¤äººå¤´ç–¼çš„-this-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ä»¤äººå¤´ç–¼çš„-this-å¯¹è±¡" aria-hidden="true">#</a> ä»¤äººå¤´ç–¼çš„ This å¯¹è±¡</h1><p>åœ¨ Javascript ä¸­ this åŠ¨æ€æŒ‡å‘ï¼Œåœºæ™¯è¾ƒå¤šã€‚ å¼€å‘ä¸­ç»å¸¸ä¼šé‡è§ this æŒ‡å‘è°çš„é—®é¢˜ã€‚ç†è§£ this å¯¹æˆ‘ä»¬å¼€å‘å¹¶ä¸”å†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç æ˜¯ææœ‰è£¨ç›Šçš„ã€‚</p><h2 id="this-åˆ°åº•æŒ‡å‘è°å‘¢" tabindex="-1"><a class="header-anchor" href="#this-åˆ°åº•æŒ‡å‘è°å‘¢" aria-hidden="true">#</a> This åˆ°åº•æŒ‡å‘è°å‘¢?</h2><h3 id="_1-å…¨å±€ç¯å¢ƒä¸­çš„-this" tabindex="-1"><a class="header-anchor" href="#_1-å…¨å±€ç¯å¢ƒä¸­çš„-this" aria-hidden="true">#</a> 1. å…¨å±€ç¯å¢ƒä¸­çš„ this</h3><p>åœ¨å…¨å±€ç¯å¢ƒä¸­è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘ window; åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹(use strict)æŒ‡å‘ undefined</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">strictFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ˜¯ä¸€ä¸ªåŸºç¡€çš„åˆ—å­, ä¸‹é¢å·²æ”¹æ‰“å°ä»€ä¹ˆå‘¢?</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fn</span><span class="token operator">:</span> <span class="token function">funciton</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bar<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> fn <span class="token operator">=</span> foo<span class="token punctuation">.</span>fn
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="custom-container details"><summary class="custom-container-title">ç­”æ¡ˆ</summary><p>window undefined</p></details>`,9),i=n("div",{class:"custom-container tip"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"åŸå› "),n("p",null,"fon.fn å‡½æ•°èµ‹å€¼ç»™ fn å˜é‡, åœ¨æ‰§è¡Œ fn è¿™ä¸ªå˜é‡å‡½æ•°æ—¶,æ‰§è¡Œç¯å¢ƒåœ¨å…¨å±€ç¯å¢ƒä¸­ã€‚å› æ­¤ this ä¸º window å¯¹è±¡,è€Œ window å¯¹è±¡ä¸‹æ²¡æœ‰ bar å±æ€§, æ‰€ä»¥æ‰“å° undefined")],-1),l=s(`<p>å¦‚æœæ¢æˆå¦å¤–ä¸€ç§è°ƒç”¨çš„è¯, ç»“æœä¼šæ˜¯æ€æ ·å‘¢ï¼Ÿ</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fn</span><span class="token operator">:</span> <span class="token function">funciton</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bar<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
foo<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="custom-container details"><summary class="custom-container-title">ç­”æ¡ˆ</summary><p>foo 100</p></details><h3 id="_2-ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨ä¸­çš„-this" tabindex="-1"><a class="header-anchor" href="#_2-ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨ä¸­çš„-this" aria-hidden="true">#</a> 2. ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨ä¸­çš„ this</h3><p>å½“ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„å¯¹è±¡ã€‚çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œä½ çŸ¥é“ç­”æ¡ˆå—ï¼Ÿ</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> o1<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> o3 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> print <span class="token operator">=</span> o1<span class="token punctuation">.</span>print<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="custom-container details"><summary class="custom-container-title">ç­”æ¡ˆ</summary><p>1, 1, undefined</p></details>`,7),u=n("div",{class:"custom-container tip"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"åŸå› "),n("p",null,"ç¬¬ä¸€ä¸ªæ‰“å°ä¸º 1ï¼Œæ¯”è¾ƒç®€å•ä¸”åœ¨ä¸Šé¢æåˆ°å°±ä¸èµ˜è¿°äº†"),n("p",null,"ç¬¬äºŒä¸ªæ‰“å°ä¹Ÿä¸º 1 return çš„æ˜¯ o1 è°ƒç”¨ print æ–¹æ³•, å¯¹äº print æ–¹æ³•é‡Œé¢çš„ this è€Œè¨€, å°†ä¼šæŒ‡å‘ o1 å¯¹è±¡"),n("p",null,[a("ç¬¬ä¸‰ä¸ªæ‰“å°ä¸º undefined å°† o1 çš„æ–¹æ³• print èµ‹å€¼äºå˜é‡ printï¼Œç”±äºè„±ç¦»äº† o1 çš„æ‰§è¡Œä¸Šä¸‹æ–‡"),n("strong",null,"è£¸å¥”"),a("è°ƒç”¨, æ­¤æ—¶çš„ this æŒ‡å‘å…¨å±€å¯¹è±¡ window")])],-1),r=s(`<h3 id="_3-é€šè¿‡-bind-call-apply-æ”¹å˜-this-æŒ‡å‘" tabindex="-1"><a class="header-anchor" href="#_3-é€šè¿‡-bind-call-apply-æ”¹å˜-this-æŒ‡å‘" aria-hidden="true">#</a> 3. é€šè¿‡ bind/call/apply æ”¹å˜ this æŒ‡å‘</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;_ucas&quot;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">logName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;mike&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span><span class="token function">logName</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// result -&gt; mike</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>bind/call/apply éƒ½æ˜¯ç”¨æ¥æ”¹å˜ this æŒ‡å‘çš„å‡½æ•°ï¼Œå®ƒä»¬ä¹‹é—´æœ‰äº›åŒºåˆ«.</p>`,3),d=n("div",{class:"custom-container tip"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"åŒºåˆ«"),n("p",null,"call/apply ç›´æ¥æ‰§è¡Œç›¸å…³å‡½æ•°è°ƒç”¨, ç¬¬ä¸€ä¸ªå‚æ•°ä¸º this æŒ‡å‘çš„å¯¹è±¡,call/apply ä¹‹é—´çš„åŒºåˆ«åœ¨äºå‚æ•°çš„è®¾å®šä¸Š bind ä¸ä¼šæ‰§è¡Œç›¸å…³å‡½æ•°,åˆ™æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¹¶ä¸”è®¾å®šäº†å‡½æ•° this çš„æŒ‡å‘")],-1),k=s(`<h3 id="_4-æ„é€ å‡½æ•°å’Œ-this" tabindex="-1"><a class="header-anchor" href="#_4-æ„é€ å‡½æ•°å’Œ-this" aria-hidden="true">#</a> 4. æ„é€ å‡½æ•°å’Œ this</h3><p>æƒ³äº†è§£æ„é€ å‡½æ•°çš„ this, éœ€è¦äº†è§£æ„é€ å‡½æ•°æ‰§è¡Œæ—¶,åšäº†äº›ä»€ä¹ˆï¼Ÿ</p><ol><li>åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</li><li>å°†æ„é€ å‡½æ•°çš„ this æŒ‡å‘è¿™ä¸ªæ–°çš„å¯¹è±¡</li><li>ä¸ºæ–°å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•</li><li>æœ€ç»ˆè¿”å›æ–°çš„å¯¹è±¡</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">&quot;Lucas&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°è¿‡ç¨‹å¯ä»¥ç”¨å¦‚ä¸‹ä»£ç è¡¨è¿°:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token function">Foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ„é€ å‡½æ•°å‡ºç°äº†æ˜¾ç¤º return æƒ…å†µ, çœ‹çœ‹å¦‚ä¸‹ä»£ç å¦‚ä½•è¾“å‡º?</p><ul><li>åœºæ™¯ä¸€</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Sudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Lucas&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœºæ™¯äºŒ</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Sudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Lucas&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="custom-container details"><summary class="custom-container-title">ç­”æ¡ˆ</summary><p>undefined Lucas</p></details>`,12),v=n("div",{class:"custom-container info"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"åˆ†æ"),n("p",null,"åœºæ™¯ä¸€: ç”±äºæ„é€ å‡½æ•°å®é™…ä¹Ÿæ˜¯å‡½æ•°,å¦‚æœæ˜¾ç¤ºçš„ return æ˜¯ä¸€ä¸ªå¯¹è±¡çš„è¯ this ä¼šæŒ‡å‘ return çš„é‚£ä¸ªå¯¹è±¡"),n("p",null,"åœºæ™¯äºŒ: æ˜¾ç¤º return çš„æ˜¯ä¸€ä¸ªæ•°å­—,å³ä¸€ä¸ªåŸºæœ¬ç±»å‹, this ä»ä¼šæŒ‡å‘å®ä¾‹")],-1),m=s(`<h3 id="_5-ç®­å¤´å‡½æ•°ä¸­çš„-this" tabindex="-1"><a class="header-anchor" href="#_5-ç®­å¤´å‡½æ•°ä¸­çš„-this" aria-hidden="true">#</a> 5. ç®­å¤´å‡½æ•°ä¸­çš„ this</h3><p>åœ¨ç®­å¤´å‡½æ•°ä¸­, this çš„æŒ‡å‘ç”±å¤–å±‚(å‡½æ•°/å…¨å±€)ä½œç”¨åŸŸæ¥å†³å®šçš„ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// result -&gt; window</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ setTimeout çš„å›è°ƒå‡½æ•°æ”¹ä¸ºç®­å¤´å‡½æ•°å‘¢ï¼Ÿ</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// result -&gt; fnå‡½æ•°</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-this-ä¼˜å…ˆçº§" tabindex="-1"><a class="header-anchor" href="#_6-this-ä¼˜å…ˆçº§" aria-hidden="true">#</a> 6. this ä¼˜å…ˆçº§</h3><p>é€šå¸¸æŠŠ callã€applyã€bindã€new å¯¹ this çš„ç»‘å®šç§°ä¸º<strong>æ˜¾å¼ç»‘å®š</strong>ï¼Œæ ¹æ®è°ƒç”¨å…³ç³»ç¡®å®š this çš„æŒ‡å‘çš„æƒ…å†µç§°ä¸º<strong>éšå¼ç»‘å®š</strong></p><p>æ˜¾å¼ç»‘å®šå’Œéšå¼ç»‘å®šè°çš„ä¼˜å…ˆçº§æ›´é«˜å‘¢ï¼Ÿçœ‹çœ‹ä¸€æ®µä»£ç ç¤ºä¾‹</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
o1<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>
o2<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="custom-container details"><summary class="custom-container-title">ç­”æ¡ˆ</summary><p>2ï¼Œ 1</p></details><p>çœ‹äº†è¿è¡Œç»“æœå‘ç°ï¼Œcall/apply çš„æ˜¾ç¤ºç»‘å®šä¸€èˆ¬ä¼˜å…ˆçº§æ›´é«˜ã€‚ åœ¨çœ‹ä¸€æ®µä»£ç </p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// result -&gt; 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœå°† bar ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œè¾“å‡ºç»“æœåˆæ˜¯å¦ä¸€ä¸ªç»“æœã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> baz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bar</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>baz<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// result -&gt; 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,14),b=n("div",{class:"custom-container info"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"åŸå› "),n("p",null,"bar å‡½æ•°æœ¬èº«é€šè¿‡ bind æ–¹æ³•å°† this çš„æŒ‡å‘äº† o1 å¯¹è±¡,å½“å†æ¬¡ä½œä¸ºæ„é€ å‡½æ•°é€šè¿‡ new æ“ä½œç¬¦æ‰§è¡Œæ—¶, æ–°å®ä¾‹å’Œ o1 å°±å·²ç»è§£ç»‘äº†, ä¹Ÿå°±æ˜¯ new æ“ä½œç¬¦ä¿®æ”¹äº† this çš„æŒ‡å‘, ç”±æ­¤å¯è§ new ç»‘å®šçš„ä¼˜å…ˆçº§é«˜äº bind ç»‘å®š")],-1),h=s(`<p>å†çœ‹çœ‹ç®­å¤´å‡½æ•°, å¦‚ä¸‹ä»£ç ç¤ºä¾‹:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// result -&gt; 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœå°† foo å‡½æ•°æ”¹å†™æˆå¦‚ä¸‹ä»£ç , ç»“æœå°±ä¼šæ˜¯ 123ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ’¡ å¦‚æœå˜é‡ a çš„ var ä¿®æ”¹ä¸º const ç»“æœæ˜¯ä»€ä¹ˆâ“</p><div class="language-diff line-numbers-mode" data-ext="diff"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line"> var a = 123;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> const a = 123;
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><details class="custom-container details"><summary class="custom-container-title">ç­”æ¡ˆ</summary><p>undefined</p></details>`,7),f=n("div",{class:"custom-container info"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"åŸå› "),n("p",null,"const å£°æ˜çš„å˜é‡ä¸ä¼šæŒ‚è½½åˆ° window å¯¹è±¡ä¸Š, æ‰€ä»¥åœ¨ window è‡ªç„¶æ˜¯æ‰¾ä¸åˆ° a å˜é‡çš„ã€‚")],-1),w=n("h3",{id:"_7-ç»“æŸè¯­",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_7-ç»“æŸè¯­","aria-hidden":"true"},"#"),a(" 7. ç»“æŸè¯­")],-1),g=n("p",null,"this æŒ‡å‘çš„åœºæ™¯å°±åˆ°æ­¤ç»“æŸäº†, ä½ æ˜¯ä¸æ˜¯å¯¹ This çš„æŒ‡å‘é—®é¢˜çš„å¤´ç–¼ç—…å¥½äº†å‘¢ï¼Ÿå¦‚æœè¿˜æœ‰ç–‘æƒ‘, ä¸éœ€è¦ç°å¿ƒ, å¯ä»¥è‡ªå·±åŠ¨æ‰‹åå¤éªŒè¯æ€»ç»“ã€‚æ…¢æ…¢å°±ä¼šèä¼šè´¯é€šã€‚",-1),y=[c,i,l,u,r,d,k,v,m,b,h,f,w,g];function x(_,j){return p(),o("div",null,y)}const M=t(e,[["render",x],["__file","this.html.vue"]]);export{M as default};
